
_G.Auto = false
_G.Speed = 0.05 -- Default speed

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Buat ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "InfCandyGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = PlayerGui

-- Frame Utama
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 380, 0, 300)
MainFrame.Position = UDim2.new(0.5, -190, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Corner untuk MainFrame
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Gradient Background
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 50)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 30))
}
Gradient.Rotation = 45
Gradient.Parent = MainFrame

-- Shadow Effect
local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.BackgroundTransparency = 1
Shadow.Position = UDim2.new(0, -15, 0, -15)
Shadow.Size = UDim2.new(1, 30, 1, 30)
Shadow.ZIndex = 0
Shadow.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.5
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 10, 10)
Shadow.Parent = MainFrame

-- Header
local Header = Instance.new("Frame")
Header.Name = "Header"
Header.Size = UDim2.new(1, 0, 0, 50)
Header.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "üç¨ INF Candy"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -45, 0.5, -17.5)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseButton.Text = "‚úï"
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame
local Content = Instance.new("Frame")
Content.Name = "Content"
Content.Size = UDim2.new(1, -30, 1, -80)
Content.Position = UDim2.new(0, 15, 0, 60)
Content.BackgroundTransparency = 1
Content.Parent = MainFrame

-- Toggle Button
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(1, 0, 0, 50)
ToggleButton.Position = UDim2.new(0, 0, 0, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
ToggleButton.Text = ""
ToggleButton.Parent = Content

local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(0, 10)
ToggleCorner.Parent = ToggleButton

local ToggleLabel = Instance.new("TextLabel")
ToggleLabel.Name = "Label"
ToggleLabel.Size = UDim2.new(1, -20, 1, 0)
ToggleLabel.Position = UDim2.new(0, 10, 0, 0)
ToggleLabel.BackgroundTransparency = 1
ToggleLabel.Text = "‚ùå Auto Disabled"
ToggleLabel.Font = Enum.Font.GothamBold
ToggleLabel.TextSize = 16
ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
ToggleLabel.Parent = ToggleButton

-- Speed Control Frame
local SpeedFrame = Instance.new("Frame")
SpeedFrame.Name = "SpeedFrame"
SpeedFrame.Size = UDim2.new(1, 0, 0, 60)
SpeedFrame.Position = UDim2.new(0, 0, 0, 65)
SpeedFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
SpeedFrame.Parent = Content

local SpeedCorner = Instance.new("UICorner")
SpeedCorner.CornerRadius = UDim.new(0, 10)
SpeedCorner.Parent = SpeedFrame

local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Name = "SpeedLabel"
SpeedLabel.Size = UDim2.new(1, -20, 0, 20)
SpeedLabel.Position = UDim2.new(0, 10, 0, 8)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "‚ö° Speed (seconds):"
SpeedLabel.Font = Enum.Font.GothamBold
SpeedLabel.TextSize = 13
SpeedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
SpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
SpeedLabel.Parent = SpeedFrame

-- Speed TextBox
local SpeedBox = Instance.new("TextBox")
SpeedBox.Name = "SpeedBox"
SpeedBox.Size = UDim2.new(1, -20, 0, 25)
SpeedBox.Position = UDim2.new(0, 10, 0, 30)
SpeedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
SpeedBox.Text = "0.05"
SpeedBox.PlaceholderText = "Enter speed (e.g., 0.05)"
SpeedBox.Font = Enum.Font.Gotham
SpeedBox.TextSize = 14
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
SpeedBox.ClearTextOnFocus = false
SpeedBox.Parent = SpeedFrame

local SpeedBoxCorner = Instance.new("UICorner")
SpeedBoxCorner.CornerRadius = UDim.new(0, 6)
SpeedBoxCorner.Parent = SpeedBox

-- Status Frame
local StatusFrame = Instance.new("Frame")
StatusFrame.Name = "StatusFrame"
StatusFrame.Size = UDim2.new(1, 0, 0, 65)
StatusFrame.Position = UDim2.new(0, 0, 0, 140)
StatusFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
StatusFrame.Parent = Content

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 10)
StatusCorner.Parent = StatusFrame

-- Targets Count
local TargetsLabel = Instance.new("TextLabel")
TargetsLabel.Name = "TargetsLabel"
TargetsLabel.Size = UDim2.new(1, -20, 0, 20)
TargetsLabel.Position = UDim2.new(0, 10, 0, 10)
TargetsLabel.BackgroundTransparency = 1
TargetsLabel.Text = "üéØ Targets Found: 0"
TargetsLabel.Font = Enum.Font.Gotham
TargetsLabel.TextSize = 13
TargetsLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
TargetsLabel.TextXAlignment = Enum.TextXAlignment.Left
TargetsLabel.Parent = StatusFrame

-- Status Label
local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(1, -20, 0, 20)
StatusLabel.Position = UDim2.new(0, 10, 0, 35)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "‚è∏Ô∏è Status: Idle"
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.TextSize = 13
StatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.Parent = StatusFrame

-- Credit Label
local CreditLabel = Instance.new("TextLabel")
CreditLabel.Name = "CreditLabel"
CreditLabel.Size = UDim2.new(1, -20, 0, 20)
CreditLabel.Position = UDim2.new(0, 10, 1, -25)
CreditLabel.BackgroundTransparency = 1
CreditLabel.Text = "Created by Rey_Script (UdinPeot)"
CreditLabel.Font = Enum.Font.GothamMedium
CreditLabel.TextSize = 11
CreditLabel.TextColor3 = Color3.fromRGB(120, 120, 140)
CreditLabel.TextXAlignment = Enum.TextXAlignment.Center
CreditLabel.Parent = MainFrame

-- Fungsi untuk animasi button
local function animateButton(button, hover)
    local tween = TweenService:Create(button, TweenInfo.new(0.2), {
        Size = hover and button.Size + UDim2.new(0, 0, 0, 3) or button.Size - UDim2.new(0, 0, 0, 3)
    })
    tween:Play()
end

-- Event untuk Close Button
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    _G.Auto = false
end)

CloseButton.MouseEnter:Connect(function()
    CloseButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
end)

CloseButton.MouseLeave:Connect(function()
    CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
end)

-- Event untuk Toggle Button
ToggleButton.MouseButton1Click:Connect(function()
    _G.Auto = not _G.Auto
    
    if _G.Auto then
        ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 220, 100)
        ToggleLabel.Text = "‚úÖ Auto Enabled"
        StatusLabel.Text = "‚ñ∂Ô∏è Status: Running"
    else
        ToggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
        ToggleLabel.Text = "‚ùå Auto Disabled"
        StatusLabel.Text = "‚è∏Ô∏è Status: Stopped"
    end
end)

ToggleButton.MouseEnter:Connect(function()
    animateButton(ToggleButton, true)
end)

ToggleButton.MouseLeave:Connect(function()
    animateButton(ToggleButton, false)
end)

-- Event untuk Speed TextBox
SpeedBox.FocusLost:Connect(function(enterPressed)
    local newSpeed = tonumber(SpeedBox.Text)
    
    if newSpeed and newSpeed > 0 then
        _G.Speed = newSpeed
        SpeedBox.TextColor3 = Color3.fromRGB(100, 255, 100)
        wait(0.3)
        SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    else
        SpeedBox.Text = tostring(_G.Speed)
        SpeedBox.TextColor3 = Color3.fromRGB(255, 100, 100)
        wait(0.3)
        SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
end)

-- Script Auto Shooting Gallery
local Event = ReplicatedStorage.RemoteEvents.CarnivalCompleteShootingGallery

local function findTargets(parent, depth)
    if depth > 3 then return {} end
    
    local targets = {}
    
    for _, child in ipairs(parent:GetChildren()) do
        if child:IsA("BasePart") then
            table.insert(targets, child)
        end
        
        for _, subTarget in ipairs(findTargets(child, depth + 1)) do
            table.insert(targets, subTarget)
        end
    end
    
    return targets
end

spawn(function()
    while task.wait(3) do
        if not _G.Auto then 
            task.wait(1)
            continue 
        end
        
        local targets = {}
        local areas = {
            workspace.Map,
            workspace.Items, 
            workspace.Characters
        }
        
        for _, area in ipairs(areas) do
            for _, target in ipairs(findTargets(area, 0)) do
                table.insert(targets, target)
            end
        end
        
        -- Update target count
        TargetsLabel.Text = "üéØ Targets Found: " .. #targets
        
        for index, target in ipairs(targets) do
            if not _G.Auto then break end
            
            local success = pcall(function()
                Event:FireServer(target)
            end)
            
            StatusLabel.Text = "‚ñ∂Ô∏è Status: Shooting (" .. index .. "/" .. #targets .. ")"
            task.wait(_G.Speed) -- Menggunakan speed yang bisa diatur
        end
        
        if _G.Auto then
            StatusLabel.Text = "‚è≥ Status: Waiting..."
        end
    end
end)

print("üç¨ INF Candy GUI Loaded!")

-- Loading Screen dengan Credit
local LoadingScreen = Instance.new("ScreenGui")
LoadingScreen.Name = "LoadingScreen"
LoadingScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
LoadingScreen.Parent = PlayerGui

local LoadingFrame = Instance.new("Frame")
LoadingFrame.Size = UDim2.new(1, 0, 1, 0)
LoadingFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
LoadingFrame.BorderSizePixel = 0
LoadingFrame.Parent = LoadingScreen

local LoadingText = Instance.new("TextLabel")
LoadingText.Size = UDim2.new(0, 400, 0, 100)
LoadingText.Position = UDim2.new(0.5, -200, 0.5, -50)
LoadingText.BackgroundTransparency = 1
LoadingText.Text = "Created By UdinPeot (Rey_Script)"
LoadingText.Font = Enum.Font.GothamBold
LoadingText.TextSize = 28
LoadingText.TextColor3 = Color3.fromRGB(100, 200, 255)
LoadingText.TextTransparency = 0
LoadingText.Parent = LoadingFrame

-- Animasi fade in dan fade out
local fadeIn = TweenService:Create(LoadingText, TweenInfo.new(0.5), {
    TextTransparency = 0
})

local fadeOut = TweenService:Create(LoadingText, TweenInfo.new(0.5), {
    TextTransparency = 1
})

local frameFadeOut = TweenService:Create(LoadingFrame, TweenInfo.new(0.5), {
    BackgroundTransparency = 1
})

fadeIn:Play()
fadeIn.Completed:Wait()
task.wait(2)
fadeOut:Play()
frameFadeOut:Play()
fadeOut.Completed:Wait()
LoadingScreen:Destroy()

print("‚úÖ Script loaded successfully!")
